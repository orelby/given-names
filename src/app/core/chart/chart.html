@let dataAxes = this.dataAxes();
@let rows = dataAxes[0].tickLabels();
@let datasets = this.$datasets();
@let isLogScale = valueAxis() === 'log';

<table>
    <thead class="visually-hidden">
        <tr>
            @for (axis of dataAxes; track axis) {
            <th scope="col">{{ axis.label() }}</th>
            }
            @for (field of datasets; track field.label) {
            <th scope="col">{{ field.label }}</th>
            }
        </tr>
    </thead>
    <tbody>
        @for (_ of rows; track $index; let i = $index) {
        <tr>
            @for (axis of dataAxes; track axis) {
            <th scope="row" class="chart-label">{{ axis.tickLabels()[i] }}</th>
            }
            @for (field of datasets; track field.dataset) {
            <td [style.--size]="(isLogScale ? Math.log10(1 + field.dataset.get(i)) : field.dataset.get(i)) / this.$maxValue()"
                [style.--color]="field.color">
                <span class="chart-data">{{ field.formatter(field.dataset.get(i)) }}</span>
            </td>
            }
        </tr>
        }
    </tbody>
</table>